---
#регистрация и авторизация
- summary: |
    Проверка успешной регистрации на сайте через email
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться на сайте
  prerequisites: |
    Открыта главная страница сайта. 
    Пользователь с указанными данными не зарегистрирован на сайте
  test-data: |
    нет
  steps:
    -   Нажать на Sign up
    -   Заполнить поля тестовыми данными - никнейм, емейл testmail1turing@gmail.com и пароль testpass1
    -   Нажать Submit
  expected-result: |
    Пользователь успешно зарегистрирован на сайте и попадает на основную страницу лобби игры

- summary: |
    Проверка успешной регистрации на сайте через github
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться на сайте
  prerequisites: |
    Пользователь уже авторизован на github. 
    Пользователь еще не был зарегистрирован на codebattle через данный github. 
    Открыта главная страница сайта
  test-data: |
    нет
  steps:
    -   Нажать на Sign up
    -   Нажать на Sign in with Github
    -   Подтвердить действие через github
  expected-result: |
    Пользователь успешно зарегистрирован через github и попадает на основную страницу лобби игры

- summary: |
    Проверка успешной авторизации на сайте через email
  requirement: |
    Пользователь должен иметь возможность авторизоваться на сайте
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    Email - testmail1turing@gmail.com
    Password - testpass1
  steps:
    -   Нажать на Sign in
    -   Ввести тестовые данные - емейл и пароль
    -   Нажать Submit
  expected-result: |
    Пользователь успешно авторизован и попадает на основную страницу лобби игры

- summary: |
    Проверка успешной авторизации на сайте через github
  requirement: |
    Пользователь должен иметь возможность авторизоваться на сайте
  prerequisites: |
    Пользователь уже авторизован на github. 
    Пользователь уже был зарегистрирован на codebattle через github. 
    Открыта главная страница сайта
  test-data: |
    нет
  steps:
    -   Нажать на Sign in
    -   Нажать на Sign in with Github
  expected-result: |
    Пользователь успешно авторизован и попадает на основную страницу лобби игры

#игры создание
- summary: |
    Проверка создания новой игры с ботом
  requirement: |
    Пользователь должен иметь возможность создать игру
  prerequisites: |
    Пользователь авторизован, открыта основная страница сайта
  test-data: |
    нет
  steps:
    -   Нажать на Create a game
    -   Выбрать Game type - With a bot
    -   Выбрать любую сложность, время и задачу
    -   Нажать Create battle
  expected-result: |
    Пользователь попадает на страницу новой созданной игры с ботом

- summary: |
    Проверка создания новой игры с ботом с заданными параметрами
  requirement: |
    Пользователь должен иметь возможность создать игру с заданными параметрами
  prerequisites: |
    Пользователь авторизован, открыта основная страница сайта
  test-data: |
    нет
  steps:
    -   Нажать на Create a game
    -   Выбрать Game type - With a bot
    -   Выбрать любую сложность, время и конкретную задачу
    -   Нажать Create battle
  expected-result: |
    Пользователь попадает на страницу новой созданной игры с заданными параметрами. 
    Все параметры игры соответствуют выбранным ранее.

- summary: |
    Проверка возможности присоединиться к созданной игре по ссылке
  requirement: |
    пользователь должен иметь возможность присоединиться к чужой игре по приглашению
  prerequisites: |
    Пользователь TestUser1 авторизован, пользователь TestUser2 авторизован на сайте с другого девайса или браузера
    Пользователь TestUser1 находится на главной основной странице сайта
  test-data: |
    нет
  steps:
    -   Нажать на Create a game от лица пользователя первого пользователя TestUser1
    -   Выбрать Game type - With other users
    -   Выбрать сложность, время и любую конкретную задачу
    -   Нажать Create battle
    -   Скопировать ссылку и отправить ее второму пользователю (TestUser2)
    -   От лица второго пользователя перейти по ссылке и нажать Join
  expected-result: |
    Второй пользователь попадает на страницу игры, созданной первым пользователем. 
    Все параметры игры соответствуют выбранным при создании.

- summary: |
    Проверка создания новой игры с другом с заданными параметрами
  requirement: |
    Пользователь должен иметь возможность создать игру с заданными параметрами
  prerequisites: |
    Пользователь TestUser1 авторизован, пользователь TestUser2 авторизован на сайте с другого девайса или браузера
    У обоих пользователей открыта основная страница сайта
  test-data: |
    нет
  steps:
    -   Нажать на Create a game от лица пользователя TestUser1
    -   Выбрать Game type - With a friend
    -   Выбрать в списке пользователей TestUser2
    -   Выбрать сложность, время и любую конкретную задачу
    -   Нажать Create battle
    -   Принять приглашение на игру пользователем TestUser2
  expected-result: |
    Оба пользователя попадают на страницу новой созданной игры с заданными параметрами. 
    Все параметры игры соответствуют выбранным при создании.

#завершение игры
- summary: |
    Проверка завершения игры победой игрока
  requirement: |
    Игра должна завершаться победой или поражением
  prerequisites: |
    Пользователь авторизован
    Создана и запущена игра с ботом на 8 или больше минут с задачей 1 сложности "Площать прямоугольника" (rect area)
  test-data: |
    const _ = require("lodash");
    const R = require("rambda");
    
    const solution = (width, length) => {
    return width * length;
    };
    
    module.exports = solution;
  steps:
    -   Выбрать в настройках редактора кода язык NodeJS
    -   Воспроизвести в редакторе кода решение задачи, указанное в test-data раньше бота
    -   Нажать на кнопку проверки Run
  expected-result: |
    Игра завершается победой игрока-пользователя, появляется сообщение о победе

- summary: |
    Проверка завершения игры проигрышем игрока
  requirement: |
    Игра должна завершаться победой или поражением
  prerequisites: |
    Пользователь авторизован
    Создана и запущена игра с ботом с любой сложностью, временем и задачей
  test-data: |
    нет
  steps:
    -   написать любые несколько символов в редакторе кода
    -   дождаться решения задачи ботом
  expected-result: |
    Игра завершается поражением игрока-пользователя, появляется сообщение о поражении

- summary: |
    Проверка завершения игры ничьей при истечении времени
  requirement: |
    Игра должна завершаться ничьей при истечении времени
  prerequisites: |
    Пользователь TestUser1 авторизован, пользователь TestUser2 авторизован на сайте с другого девайса или браузера
    Создана и запущена игра между пользователями TestUser1 и TestUser2 с любой сложностью, временем и задачей
  test-data: |
    нет
  steps:
    -   дождаться истечения времени на задачу
  expected-result: |
    Игра завершается ничьей с сообщением "Time is up. There are no winners in the game"

- summary: |
    Проверка функции "Сдаться" (Give up) в игре
  requirement: |
    Игра должна завершаться победой или поражением
  prerequisites: |
    Пользователь авторизован
    Создана и запущена игра с ботом с любой сложностью, временем и задачей
  test-data: |
    нет
  steps:
    -   нажать на кнопку с флажком "Give up"
    -   подтвердить выбор в всплывающем окне
  expected-result: |
    Игра завершается поражением игрока-пользователя, появляется сообщение о поражении

#возврат в активную игру
- summary: |
    Проверка возможности возврата в игру после "Вылета"
  requirement: |
    пользователь должен иметь возможность вернуться и продолжить игру до истечения времени, если покинул страницу с текущей игрой
  prerequisites: |
    Пользователь авторизован
    Создана и запущена игра с ботом с любой сложностью, временем и задачей. Время на задачу еще не истекло.
  test-data: |
    нет
  steps:
    -   закрыть вкладку сайта с игрой
    -   зайти на главную страницу сайта
    -   нажать Continue
  expected-result: |
    Пользователь попадает обратно в текущую игру, ранее написанный текст в редакторе кода сохраняется

#просмотр завершенных игр
- summary: |
    Проверка просмотра записи завершенной игры
  requirement: |
    пользователь должен иметь возможность просматривать историю завершенных игр
  prerequisites: |
    Пользователь авторизован и находится на основной странице
  test-data: |
    нет
  steps:
    -   открыть вкладку Completed games 
    -   нажать на кнопку Show у любой завершенной игры
    -   в открывшейся вкладке прошедшей игры нажать на кнопку Play
  expected-result: |
    Проигрывается запись всей игры последовательно - действия обоих игроков в редакторе кода и появление сообщений в чате.